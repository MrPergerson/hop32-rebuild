poke(24365,1)local n,t,f,d,i,l,o,e=0,0,0,0,0,{}function _init()e=0o=0n=0if s==a.complete or s==a.gameover do s=a.playerSelect else s=a.mainMenu end u(s)end function F()cls()_init()end function u(e)s=e if s==a.mainMenu do h=0c=0T(B)U()elseif s==a.playerSelect do r=11C=0f=(r+1)*128h=r*16*8c=C*16*8V(5)W()X()Y(r)Z=_*8-128+80ee()D={}t=.4menuitem(2,"set gamemode",function()en()end)y=15et={[1]=g,[2]=E}elseif s==a.game do ef()elseif s==a.complete or s==a.gameover do p=3for n,e in pairs(g)do if e.enabled==true do add(D,{e.sprite,e.disabledCount,e.totalTimeEnabled})end end G()end end B=function()u(a.playerSelect)end function _update()local d=time()e=d-o o=d if s==a.mainMenu do ed(e)elseif s==a.playerSelect do local n=false n=ei(h,c,e,t==0)if t>0do stat(31)end t=max(0,t-e)if x>0do w=max(0,w-e)if w==0do n=true end end if n do u(a.game)end elseif s==a.game do if m do H()if b do I()elseif j do J()end else if n<1.5do n+=e else h=h+15*e end if K~=L.CLOUD_KINGDOM do K=L.CLOUD_KINGDOM else if eo and not e1[1].enabled do u(a.complete)end end if el==x do u(a.gameover)n=0end M(e)v(h,c,e)N(e)e0()if k<1do k=(h-(f-128))/128c=eh(e2,ec,min(k,1))end end if h>=f do r+=1f+=128ea(r)end while stat(30)do q=stat(31)if q=="れ"do O()end es(q)end elseif s==a.gameover do M(e)v(h,c,e)N(e)z()p=P(p,e)elseif s==a.complete do z()p=P(p,e)end end function _draw()cls()camera(h,c)map(0,0,0,c,128,16)map(0,0,1024,c,128,16)map(0,0,2048,c,128,16)map(0,0,3072,c,128,16)e8()eu()e3()Q(E)Q(g)if m do er()end if s==a.mainMenu do e6()elseif s==a.playerSelect do rectfill(h,0,h+128,c+5,c)?"press any button to join",h+4,c,7
if x>0do?"starting in "..flr(w),h+4,c+8,7
end?"⁶w⁶thop"..x,h+46,c+56
elseif s==a.game do elseif s==a.complete or s==a.gameover do e4()end if s==a.game or s==a.playerSelect do if A>0do rectfill(h,0,h+128,c+5,c)?"set gamemode to "..e5().title,h+16,c,7
A=max(0,A-e)end end if m do rect(h,c,h+127,c+127,7)?h/8 ..","..c/8,h+4,c+4
?h/8+16 ..","..c/8+16,h+128+4,c+128+4
d=stat(32)+h i=stat(33)+c rect(d,i,d+2,i+2)end end function z()if n<2do n+=e else y-=e if y<=0do F()elseif stat(30)and stat(31)==" "do F()end end end function O()m=not m if m do menuitem(2,"toggle fast travel",function()R()end)menuitem(3,"toggle pcannon",function()S()end)else menuitem(2)menuitem(3)end end function H()if btn(0)do h-=10end if btn(1)do if b do h+=10else h=min(h+10,f-1)end end if btn(2)do c-=10end if btn(3)do c+=10end if stat(34)==1do printh(flr(d/8)..", "..flr(i/8))end end function R()b=not b end function I()for n,e in pairs(g)do if e.enabled==false do e.xpos=h+56e.ypos=c+8end end end function S()j=not j end function J()if stat(34)==1do local e=g[eg[e7]]if e.enabled do em(e)end e.xpos=flr(d)e.ypos=flr(i)e.vx=100e.vy=100end v(h,c,e)end function G()local e={}for t,n in pairs(g)do if n.enabled==false and type(n.id)~="number"do add(e,{n.sprite,n.disabledCount,n.totalTimeEnabled})end end local n=#e for t=1,n-1do for n=1,n-t do local t,f=e[n],e[n+1]if t[2]>f[2]or t[2]==f[2]and t[3]<f[3]do e[n],e[n+1]=e[n+1],e[n]end end end for n=1,#e do add(D,e[n])end end
poke(24365,1)n={}h=48d=16f=0o=32local e=0c={}u=11function D()f=l.VOID e=flr(rnd(128))end function b(n)local e={x=n,y=0,tiles={},surface_tiles={}}for n=n,n+d-1do e.tiles[n]={}for d=0,o-1do if n<l.GRASS do e.tiles[n][d]={x=n,y=d,sprite=r.GROUND}elseif n<l.DESERT do e.tiles[n][d]={x=n,y=d,sprite=r.SAND_1}elseif n<l.MOUNTAIN do e.tiles[n][d]={x=n,y=d,sprite=r.MOUNTAIN_2}elseif n<l.SNOW do e.tiles[n][d]={x=n,y=d,sprite=r.SNOW_2}elseif n<l.CITY do e.tiles[n][d]={x=n,y=d,sprite=r.ORELAND_1}elseif n<l.VOID do e.tiles[n][d]={x=n,y=d,sprite=r.HELL_2}else e.tiles[n][d]={x=n,y=d,sprite=r.GROUND}end end end for n=n,n+d-1do for d=0,o-1do local o=s(n)+0if d-u<o do e.tiles[n][d].sprite=r.NONE end end end if n==g*16and j==k.playerSelect do else if n>0and n<f-h and rnd(1)>=.5do local d=flr(rnd(d-2-1))local n=n+d+1for n=n,n+2,1do for d=0,o-1,1do e.tiles[n][d].sprite=r.NONE end end end end for n=n,n+d-1do for d=1,o-1do local o,d=e.tiles[n][d-1],e.tiles[n][d]if o.sprite==r.NONE and d.sprite~=r.NONE do add(e.surface_tiles,d)if n<l.GRASS do d.sprite=r.GRASS elseif n<l.DESERT do elseif n<l.MOUNTAIN do d.sprite=r.MOUNTAIN_1 elseif n<l.SNOW do end end end end return e end function m(e,d)local n={x=e,y=d,tiles={},surface_tiles={}}for e=e,e+15do n.tiles[e]={}for d=d,d+15do n.tiles[e][d]={x=e,y=d,sprite=r.NONE}end end local l,f,o=0,0,true for t=e,e+15do if l==4do o=not o l=0end l+=1f=flr(rnd(4))-2for e=d,d+15do if o and e==10+f do n.tiles[t][e].sprite=r.ORELAND_3 elseif o and e>9+f do n.tiles[t][e].sprite=r.ORELAND_1 end if e>14do n.tiles[t][e].sprite=r.ORELAND_2 end end end for e=e,e+15do for d=d+1,d+15do local o,e=n.tiles[e][d-1],n.tiles[e][d]if o.sprite==r.NONE and e.sprite~=r.NONE do add(n.surface_tiles,e)end end end return n end function p(n,e,l)local d={x=n,y=e,tiles={},surface_tiles={}}for n=n,n+15do d.tiles[n]={}for e=e,e+15do d.tiles[n][e]={x=n,y=e,sprite=r.NONE}end end local o,l=0,l for f=1,3do local t=o o=o+4+flr(rnd(2))local o,r,i=flr(rnd(8))+7,flr(rnd(2)),flr(rnd(2))x(l,n+t+r,e+o+i,n,e,d.tiles)if f&2==0do l=max(3,l-1)end end a(d,n,e,88)return d end function q(n,e)local d={x=n,y=e,tiles={},surface_tiles={}}for n=n,n+15do d.tiles[n]={}for e=e,e+15do d.tiles[n][e]={x=n,y=e,sprite=r.CLOUD_1}end end for n=n,n+15do for e=e,e+15do if e<sin((n-1)/8)+13and e>sin((n-5)/8)+2do d.tiles[n][e].sprite=r.NONE end end end a(d,n,e,-1)return d end function x(d,n,e,f,l,o)n=min(n,f+14-d)e=min(e,l+14-d+1)local l=v(n*8,e*8,d*8,d*8)add(c,l)local t=0for f=0,d-1,1do for d=0,d-1,1do local n,e,d=n+f,e+d,0if i(l,n*8,e*8)do d+=1end if i(l,(n+1)*8,e*8)do d+=1end if i(l,(n+1)*8,(e+1)*8)do d+=1end if i(l,n*8,(e+1)*8)do d+=1end if d>=2do o[n][e].sprite=88t+=1end end end if t==0do o[n][e].sprite=88if n+1==f+15+d-1do o[n-1][e].sprite=88else o[n+1][e].sprite=88end o[n][e+1].sprite=88end end function s(n)if n<=l.GRASS do return sin((n-1+e)/16)elseif n<=l.DESERT do return sin((n-1+e)/8)elseif n<=l.MOUNTAIN do return sin((n-1+e)/16)+4*sin((n-1+e)/16*1.5)elseif n<=l.SNOW do return sin((n-1+e)/16)else return sin((n-1+e)/16)end end function a(n,e,d,o)for e=e,e+15do for d=d+1,d+15do local l,e=n.tiles[e][d-1],n.tiles[e][d]if l.sprite==r.NONE and e.sprite~=r.NONE do if o>0do e.sprite=o end add(n.surface_tiles,e)end end end end function w(n)return n[flr(rnd(#n))+1]end function y(n)local n=flr(n/8)for e=1,15do local d,n=F(n,e-1),F(n,e)if d.tile==r.NONE and n.tile~=r.NONE do return n end end end function z()for e,n in ipairs(c)do A(n)end end